{"ast":null,"code":"import jwt from 'jsonwebtoken';\nimport { PrismaClient } from '@prisma/client';\nconst prisma = new PrismaClient();\nexport default (async (req, res) => {\n  const {\n    token\n  } = req.cookies;\n\n  if (token) {\n    const {\n      id,\n      setName\n    } = jwt.verify(token, process.env.JWT_SECRET);\n    const set = await prisma.set.findOne({\n      where: {\n        id\n      }\n    });\n    res.json(set);\n  } else {\n    res.json([]);\n  }\n});","map":{"version":3,"sources":["/Users/elie/code/ehymowitz/set-sharer/pages/api/set.ts"],"names":["jwt","PrismaClient","prisma","req","res","token","cookies","id","setName","verify","process","env","JWT_SECRET","set","findOne","where","json"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,cAAhB;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,MAAMC,MAAM,GAAG,IAAID,YAAJ,EAAf;AAEA,gBAAe,OAAOE,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEC,IAAAA;AAAF,MAAYF,GAAG,CAACG,OAAtB;;AAEA,MAAID,KAAJ,EAAW;AACT,UAAM;AAAEE,MAAAA,EAAF;AAAMC,MAAAA;AAAN,QAAkBR,GAAG,CAACS,MAAJ,CAAWJ,KAAX,EAAkBK,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAAxB;AACA,UAAMC,GAAG,GAAG,MAAMX,MAAM,CAACW,GAAP,CAAWC,OAAX,CAAmB;AAAEC,MAAAA,KAAK,EAAE;AAAER,QAAAA;AAAF;AAAT,KAAnB,CAAlB;AACAH,IAAAA,GAAG,CAACY,IAAJ,CAASH,GAAT;AACD,GAJD,MAIO;AACLT,IAAAA,GAAG,CAACY,IAAJ,CAAS,EAAT;AACD;AACF,CAVD","sourcesContent":["import jwt from 'jsonwebtoken'\nimport { PrismaClient } from '@prisma/client'\nconst prisma = new PrismaClient()\n\nexport default async (req, res) => {\n  const { token } = req.cookies\n\n  if (token) {\n    const { id, setName } = jwt.verify(token, process.env.JWT_SECRET)\n    const set = await prisma.set.findOne({ where: { id } })\n    res.json(set)\n  } else {\n    res.json([])\n  }\n}\n"]},"metadata":{},"sourceType":"module"}